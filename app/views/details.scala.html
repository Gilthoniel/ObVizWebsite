@(webpage: WebPage, app: AndroidApp, titles: Map[Integer, List[String]], related: List[AndroidApp])

@main(webpage) {
    <div class="row" id="details-header">
        <div class="col-xs-12 col-md-12">
            <table class="information">
                <tr>
                    <td rowspan="2" class="logo">
                        <img src="@app.getImage" alt="Logo" />
                    </td>
                    <td class="name">
                        @app.getName
                    </td>
                </tr>
                <tr>
                    <td class="rating">
                        @for(i <- 1 to app.getScore) {
                            <img src="@routes.Assets.versioned("images/icons/star.png")" alt="" />
                        }
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12 col-md-6">
            <div id="details-gauge">
                <div class="opinion-slider">
                @for((id, opinionValue) <- app.getMappedOpinions) {
                    <div>
                        <div class="opinion-box" data-topic="@id">
                            <canvas width="180" height="100" data-value="@opinionValue.percentage" class="gauge"></canvas>
                            <h4>@titles.get(id).head</h4>
                        </div>
                    </div>
                }
                </div>
                <div class="indicator-slider"><div></div></div>
            </div>
        </div>

        <div class="col-xs-12 col-md-6">
            <div id="details-opinions">
                @for((id, opinionValue) <- app.getMappedOpinions) {
                    <span onclick="OBVIZ.goTo(@id)"
                            style="font-size: @opinionValue.getFontSize(app.getMaxNumberOpinions)em">@titles.get(id).head</span>
                }
            </div>
        </div>
    </div>

    <div class="row" style="position: relative;">
        @* List of relative applications *@
        <div class="col-xs-12 col-sm-4 col-md-3" id="details-related">
            <h3>Related Applications</h3>
            <ul>
                @for(app <- related) {
                    <li class="related-app">
                        <img src="@app.getImage" alt="@app.getName" />
                        <span>@app.getName</span>
                    </li>
                }
            </ul>
        </div>
        @* Box to compare the applications *@
        <div class="col-xs-12 col-sm-offset-4 col-sm-8 col-md-offset-2 col-md-10" id="details-comparison">
            <button id="close-comparison"><span class="glyphicon glyphicon-remove-circle"></span></button>
        </div>

        @* List of the reviews of the application *@
        <div class="col-xs-12 col-sm-offset-4 col-sm-8 col-md-offset-3 col-md-9" id="details-reviews">
        @for((id, reviews) <- app.getMappedReviews) {
            <div id="topic-@id" class="topic-container" style="display: none;">
            @for(review <- reviews.take(50)) {

                <div class="col-xs-12 col-md-6 col-lg-4">
                    <div class="review">
                        <div class="header">
                            <table>
                                <tr>
                                    <td>@review.getTitle</td>
                                    <td>
                                        @for(i <- 1 to review.getScore) {
                                            <img height="15" src="@routes.Assets.versioned("images/icons/star.png")" />
                                        }
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div class="body" onclick="OBVIZ.expand($(this));">
                            <div class="top-gradient"></div>
                            <div class="bottom-gradient"></div>
                            <div class="content">
                                <p class="inner">
                                    @Html(review.getParsedBody(id))
                                </p>
                            </div>
                        </div>
                        <div class="footer">
                            @review.getAuthorName, @review.getDate
                        </div>
                    </div>
                </div>
            }
            </div>
        }
        </div>
    </div>

    <script type="text/javascript" src="@routes.Assets.versioned("javascripts/pages/details.js")"></script>
}